// the only data structure is builtin heap allocated array.
// there is no stack array.

#include "../def.h"

collector(MARK_SWEEP);
allocator(FREE_LIST);

do
    nil := allocate[0];

    xs := allocate[2]; xs[1] := 1;
    ys := allocate[2]; xs[2] := 2;
    zs := allocate[2]; xs[3] := 3;

    do qs := alloc[2]; end;

    xs[0] := ys; ys[0] := zs; zs[0] := nil;

    do
        p := xs;
        while p[0] != nil do
            p := p[0];
        end;
    end;
end;
